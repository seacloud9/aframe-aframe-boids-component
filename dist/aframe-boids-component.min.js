!function(t){function i(a){if(o[a])return o[a].exports;var s=o[a]={exports:{},id:a,loaded:!1};return t[a].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}var o={};return i.m=t,i.c=o,i.p="",i(0)}([function(t,i,o){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("aframe-boids",{schema:{},multiple:!1,init:function(){var t=o(2),i=o(1);this.data.boids=[];for(var a=0;a<200;a++)this.data.boid=this.data.boids[a]=new t,this.data.boid.position.x=400*Math.random()-200,this.data.boid.position.y=400*Math.random()-200,this.data.boid.position.z=400*Math.random()-200,this.data.boid.velocity.x=2*Math.random()-1,this.data.boid.velocity.y=2*Math.random()-1,this.data.boid.velocity.z=2*Math.random()-1,this.data.boid.setAvoidWalls(!0),this.data.boid.setWorldSize(500,500,400),this.data.bird=this.data.birds[a]=new THREE.Mesh(new i,new THREE.MeshBasicMaterial({color:16777215*Math.random(),side:THREE.DoubleSide})),this.data.bird.phase=Math.floor(62.83*Math.random()),this.scene.add(this.data.bird)},update:function(t){},remove:function(){},tick:function(t){for(var i=0,o=this.data.birds.length;i<o;i++)this.data.boid=this.data.boids[i],this.data.boid.run(boids),this.data.bird=this.data.birds[i],this.data.bird.position.copy(this.data.boids[i].position),this.data.color=this.data.bird.material.color,this.data.color.r=this.data.color.g=this.data.color.b=(500-this.data.bird.position.z)/1e3,this.data.bird.rotation.y=Math.atan2(-this.data.boid.velocity.z,this.data.boid.velocity.x),this.data.bird.rotation.z=Math.asin(this.data.boid.velocity.y/this.data.boid.velocity.length()),this.data.bird.phase=(this.data.bird.phase+(Math.max(0,this.data.bird.rotation.z)+.1))%62.83,this.data.bird.geometry.vertices[5].y=this.data.bird.geometry.vertices[4].y=5*Math.sin(this.data.bird.phase)},pause:function(){},play:function(){}})},function(t,i){var o=function(){function t(t,i,a){o.vertices.push(new THREE.Vector3(t,i,a))}function i(t,i,a){o.faces.push(new THREE.Face3(t,i,a))}var o=this;THREE.Geometry.call(this),t(5,0,0),t(-5,-2,1),t(-5,0,0),t(-5,-2,-1),t(0,2,-6),t(0,2,6),t(2,0,0),t(-3,0,0),i(0,2,1),i(4,7,6),i(5,6,7),this.computeFaceNormals()};o.prototype=Object.create(THREE.Geometry.prototype),o.prototype.constructor=o,t.exports=o},function(t,i){var o=function(){var t,i,o=new THREE.Vector3,a=500,s=500,n=200,e=100,d=4,r=.1,h=!1;this.position=new THREE.Vector3,this.velocity=new THREE.Vector3,t=new THREE.Vector3,this.setGoal=function(t){i=t},this.setAvoidWalls=function(t){h=t},this.setWorldSize=function(t,i,o){a=t,s=i,n=o},this.run=function(i){h&&(o.set(-a,this.position.y,this.position.z),o=this.avoid(o),o.multiplyScalar(5),t.add(o),o.set(a,this.position.y,this.position.z),o=this.avoid(o),o.multiplyScalar(5),t.add(o),o.set(this.position.x,-s,this.position.z),o=this.avoid(o),o.multiplyScalar(5),t.add(o),o.set(this.position.x,s,this.position.z),o=this.avoid(o),o.multiplyScalar(5),t.add(o),o.set(this.position.x,this.position.y,-n),o=this.avoid(o),o.multiplyScalar(5),t.add(o),o.set(this.position.x,this.position.y,n),o=this.avoid(o),o.multiplyScalar(5),t.add(o)),Math.random()>.5&&this.flock(i),this.move()},this.flock=function(o){i&&t.add(this.reach(i,.005)),t.add(this.alignment(o)),t.add(this.cohesion(o)),t.add(this.separation(o))},this.move=function(){this.velocity.add(t);var i=this.velocity.length();i>d&&this.velocity.divideScalar(i/d),this.position.add(this.velocity),t.set(0,0,0)},this.checkBounds=function(){this.position.x>a&&(this.position.x=-a),this.position.x<-a&&(this.position.x=a),this.position.y>s&&(this.position.y=-s),this.position.y<-s&&(this.position.y=s),this.position.z>n&&(this.position.z=-n),this.position.z<-n&&(this.position.z=n)},this.avoid=function(t){var i=new THREE.Vector3;return i.copy(this.position),i.sub(t),i.multiplyScalar(1/this.position.distanceToSquared(t)),i},this.repulse=function(i){var o=this.position.distanceTo(i);if(o<150){var a=new THREE.Vector3;a.subVectors(this.position,i),a.multiplyScalar(.5/o),t.add(a)}},this.reach=function(t,i){var o=new THREE.Vector3;return o.subVectors(t,this.position),o.multiplyScalar(i),o},this.alignment=function(t){for(var i,o=new THREE.Vector3,a=0,s=0,n=t.length;s<n;s++)Math.random()>.6||(i=t[s],distance=i.position.distanceTo(this.position),distance>0&&distance<=e&&(o.add(i.velocity),a++));if(a>0){o.divideScalar(a);var d=o.length();d>r&&o.divideScalar(d/r)}return o},this.cohesion=function(t){for(var i,o,a=new THREE.Vector3,s=new THREE.Vector3,n=0,d=0,h=t.length;d<h;d++)Math.random()>.6||(i=t[d],o=i.position.distanceTo(this.position),o>0&&o<=e&&(a.add(i.position),n++));n>0&&a.divideScalar(n),s.subVectors(a,this.position);var c=s.length();return c>r&&s.divideScalar(c/r),s},this.separation=function(t){for(var i,o,a=new THREE.Vector3,s=new THREE.Vector3,n=0,d=t.length;n<d;n++)Math.random()>.6||(i=t[n],o=i.position.distanceTo(this.position),o>0&&o<=e&&(s.subVectors(this.position,i.position),s.normalize(),s.divideScalar(o),a.add(s)));return a}};t.exports=o}]);